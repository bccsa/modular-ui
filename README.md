# modular-ui
A data-first, parent-child structured javascript front-end framework

### Identifying DOM elements
DOM elements can easily be identified by adding a special ```@{identifier}``` tag to the element ID parameter. modular-ui automatically creates class properties for the html DOM elements identified with the special ```@{identifier}``` tag. The actual element ID is created by prefixing the control's unique uuid to the identifier specified in the ```@{identifier}``` special tag.

Example
```javascript
get html() {
    return `
        <div id="@{_myDivName}"></div>
    `;
}

Init() {
    this._myDivName.innerHtml = 'My custom text set to div in Javascript!';
}
```

Identifiers may only consist of the following characters: _ (underscores), a to z and A to Z.

### Parent - Child structure
modular-ui makes use of a parent-child structure, where child controls are added as properties to parent controls.

Example:
```javascript
{
    Parent: {
        controlType: "someControl",
        property1: "value1",
        property2: "value2",
        child1: {
            controlType: "someOtherControl",
            childProperty1: "some value",
            childProperty2: "some value"
        },
        child2: {
            controlType: "evenAnotherControl",
            childProperty1: "some value",
            childProperty2: "some value",
            grandChild1: {
                controlType: "someControl",
                grandChildProperty1: "val"
            }
        }
    }
}
```

Including child controls' HTML output in the DOM can be done in one of two ways:
#### 1) Add a div to the parent control and set it to the _controlsDiv property
```javascript
get html() {
    return `
        <span>Simple control containing child controls</span>
        <div id="@{_controlsDiv}"</div>`
}
```
#### 2) Add a div to the parent control with a custom javascript reference, and include the property name in SetData().
This method is useful when child controls need to be placed in more than one div in the parent control.

Parent control:
```javascript
get html() {
    return `
        <span>Simple control containing child controls</span>
        <div id="@{_preferredPropertyName}"></div>`
}
```
Creating the child through SetData():
```javascript
parent.SetData({
    child1: {
        controlType: "childControl",
        parentElement: "_preferredPropertyName"
    }
});
```

### Notifying property changes
On control creation through SetData(), properties not starting with "_" of boolean, string, number or array types are automatically equipped with getters and setters. The setters fires an event with the property name and updated value when the property value is set.
The property values are stored in the control._properties object.

SetData also triggers the Update(propertyName) override function when a property is set. This is however depreciated, and the events generated by the setters should be used instead to handle property value changes.

```javascript
this.on('propertyName', val => {
    // implementing logic to handle value change
})
```
Note: property change events are emitted locally only (see Events - scope = local).

### Events
moduler-ui implements a configurable event emitter.

#### emit
Emitting a basic (local) event:
```javascript
control.emit('eventName', 'some event data');
```

The scope can be passed to the event emitter as the third parameter:
* local (default): Only fire the event on the local control (where it has be emitted).
* bubble: Fire the event on the local control, and all its ancestors.
* top: Only fire the event on the top level parent control.
* local_top: Fire the event on the local control as well as on the top level parent control.

Including the scope:
```javascript
control.emit('eventName', 'some event data', 'bubble');
```

#### on
Subscribing to events:
```javascript
control.on('eventName', data =< {
    // callback logic
});
```

#### one
Subscribing to events for only one time. (After the event has fired, automatically unsubscribe.)
```javascript
control.one('eventName', data =< {
    // callback logic
});
```

## Known Issues
* 

## To do
[ ] SetData() Performance improvement: Cache object paths on first call.
[ ] Complete documentation
